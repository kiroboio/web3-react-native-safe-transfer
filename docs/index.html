<html lang="en">
<head>
    <meta charset='UTF-8'>
    <title>Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mini.css/3.0.1/mini-default.min.css">
    <style>
        h5 {
            font-size: 1.2rem;
            font-weight: bold;
        }

        code {
            line-height: inherit;
        }

        header {
            display: flex;
            align-items: center;
        }

        .spacer {
            flex-grow: 1;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<header>
    <a href="/" class="logo">Documentation</a>
        <div class="spacer"></div>
    <button onclick="openSearch()"><span class="icon-search"></span> Search: <kbd>Ctrl</kbd>+<kbd>K</kbd></button>
</header>
<div class="container">
    <div class="row">
        <aside class="col-sm-12 col-md-4 col-lg-3">
            <nav class="fixed">
                <a href="/">Project README</a>
                <span>Modules</span>
                                    <a href="/@kiroboio/web3-react-safe-transfer">
                        <code>
                            @kiroboio/web3-react-safe-transfer                        </code>
                    </a>
                            </nav>
        </aside>
        <div class="col-sm-12 col-md-8 col-lg-6">
<h1>Docs</h1>
<h2>Getting Started</h2>
<h3>Install</h3>
<pre><code class="language-sh">npx i --save @kiroboio/web3-react-safe-transfer
# or
yarn add @kiroboio/web3-react-safe-transfer
</code></pre>
<h3>Peer Dependencies</h3>
<pre><code class="language-json">{
    &quot;react&quot;: &quot;^16.13.1&quot;,
    &quot;react-dom&quot;: &quot;^16.13.1&quot;,
    &quot;reactotron-core-client&quot;: &quot;^2.8.10&quot;,
    &quot;reactotron-mst&quot;: &quot;^3.1.3&quot;,
    &quot;reactotron-react-js&quot;: &quot;^3.3.7&quot;,
    &quot;typescript&quot;: &quot;4.2&quot;
}
</code></pre>
<h3>Use</h3>
<pre><code class="language-typescript">import React from 'react'
import ReactDOM from 'react-dom'
import { App } from './App'
import { KiroboProvider } from '@kiroboio/web3-react-safe-transfer'

ReactDOM.render(
  &lt;KiroboProvider&gt;
    &lt;App /&gt;
  &lt;/KiroboProvider&gt;,
  document.getElementById('root')
)

</code></pre>
<pre><code class="language-typescript">import React from 'react'
import { Wallet } from &quot;./Wallet&quot;
import { useAccount, observer, Connectors } from '@kiroboio/web3-react-safe-transfer/lib'


export const App = observer(() =&gt; {
  const {
    connect,
  } = useAccount()
  
  const handleLogin = () =&gt; {
      connect(Connectors.Injected)
  }
    
  return &lt;Wallet onLogin={handleLogin} /&gt;
})
</code></pre>
<pre><code class="language-typescript">import React from 'react'
import { Wallet } from &quot;./Wallet&quot;
import { useAccount, observer } from '@kiroboio/web3-react-safe-transfer/lib'

export const Wallet = observer(() =&gt; {
  const {
    address,
    balance,
  } = useAccount()
    
  return (
      &lt;div className=&quot;wallet&quot;&gt;
      	address: { address }
        balance: { balance }                 
      &lt;/div&gt;
   	)
})
</code></pre>
<h3>Debugging</h3>
<p>For view <code>Safe Transfer</code> state &amp; actions install and configure [Reactotron]: <a href="https://github.com/infinitered/reactotron">https://github.com/infinitered/reactotron</a></p>
<pre><code class="language-typescript">import React, { useEffect } from 'react'
import { configureReactotronDebugging, useAccount, observer, Connectors  } from '@kiroboio/web3-react-safe-transfer'
import { Wallet } from &quot;./Wallet&quot;


export const App = observer(() =&gt; {
  const {
    connect,
  } = useAccount()
  
  const handleLogin = () =&gt; {
      connect(Connectors.Injected)
  }
  
  useEffect(() =&gt; {
      configureReactotronDebugging()
  }, [])
    
  return &lt;Wallet onLogin={handleLogin} /&gt;
})
</code></pre>
<p>Since our App component was observing everything, it was re-rendering whenever you changed something.</p>
<p>For state management we use [Mobx State Tree]: <a href="https://mobx-state-tree.js.org/intro/welcome">https://mobx-state-tree.js.org/intro/welcome</a></p>
<h2>Main concepts</h2>
<h3>State</h3>
<p>Get <code>Safe Transfer</code> current state with <code>useAccount</code> hook</p>
<pre><code class="language-typescript">const {
    address,
    balance,
  } = useAccount()
</code></pre>
<h3>Actions</h3>
<p>Change <code>Safe Transfer</code>  state with <strong>actions</strong></p>
<pre><code class="language-typescript">const {
    connect,
    disconnect,
  } = useAccount(
</code></pre>
<h3>Observer</h3>
<p>Use <code>observer</code> for enabling the React component to re-render if any of it's observed data changes.</p>
<pre><code class="language-typescript">import { observer } from '@kiroboio/web3-react-safe-transfer'

export const Address = observer(() =&gt; {
    const {
    	address,
  	} = useAccount()
    
    return address
})
</code></pre>
<h3>Web3 Actions</h3>
<p>Run <code>web3</code> actions with <code>name.set()</code></p>
<pre><code class="language-typescript">const {
    address,
    deposit,
    currency,
} = useAccount()
  
const setDeposit = ({
        to,
        value,
        passcode,
        message,
    }: DepositParams) =&gt; {
    
    deposit.set({
        from: address,
        to,
        value: etherToWei(value, currency.decimals),
        passcode,
        message,
    })
}
</code></pre>
<h3>Web3 Action Status</h3>
<p>Check <code>web3</code> action status <code>name.is</code></p>
<pre><code class="language-typescript">is: {  
 	ready: boolean;
    running: boolean;
    done: boolean;
    failed: boolean;
    withFailMessage: string;
    withId: number;
``}
</code></pre>
<pre><code class="language-typescript">const { deposit } = useAccount()

return &lt;Spinner isLoading={deposit.is.running} /&gt;
</code></pre>
<h3>Lists</h3>
<p>Lists of transactions</p>
<pre><code>const {
  transfers,
  incoming,
  outgoing,
 = useAccount()
</code></pre>
<h2>Connect</h2>
<h2>Transactions</h2>
<p>To create a retrievable transfer that can be collected use <code>deposit</code></p>
<p><code>const { deposit } = useAccount()</code></p>
<h3>Deposit</h3>
<h4>Set</h4>
<pre><code class="language-typescript">deposit.set: ({ from, to, value, passcode, message, }: {
    from: string;
    to: string;
    value: string;
    passcode: string;
    message?: string | undefined;
}) =&gt; void

@param from — ethereum address from

@param to — ethereum address to

@param value — value to send in wei

@param passcode — secure code to collect or retrieve transaction

@param message — optional message to send

@returns
void

After setting the values deposit transaction will started
</code></pre>
<pre><code class="language-typescript">import { useAccount, etherToWei } from '@kiroboio/web3-react-safe-transfer

const {
    address,
    deposit,
    currency,
} = useAccount()

const setDeposit = ({
        to,
        value,
        passcode,
        message,
    }: DepositParams) =&gt; {
    
    deposit.set({
        from: address,
        to,
        value: etherToWei(value, currency.decimals),
        passcode,
        message,
    })
}
</code></pre>
<h4>Status</h4>
<p>[<a href="http://deposit.is">deposit.is</a>](#Web3 Action Status)</p>
<h3>Retrieve</h3>
<h3>Collect</h3>
<h3>Swap</h3>
<h2>Lists</h2>
<h3>Incoming</h3>
<h3>Outgoing</h3>
<h3>Transfers</h3>
<h3>Swaps</h3>
<h3>History</h3>
<h2>Utils</h2>
</div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/flexsearch@0.6.32/dist/flexsearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fliegwerk/search-popup@2.0.0/dist/bundle.js"></script>
<script>
    const searchIndex = new FlexSearch({
        encode: q => (q.replace(/([a-z])([A-Z])/g, "$1 $2")).toLowerCase() + ' ' + q.toLowerCase(),
        // encode: q => (q.replace(/(.*)[\W.](.*)/g, "$1$2")).toLowerCase(),
        tokenize: "full",
        threshold: 0,
        resolution: 9,
        depth: 3,
        doc: {
            id: 'url',
            field: ['name', 'text']
        }
    });

    function search(q) {
        q = q || '';
        return searchIndex.search((q.replace(/([a-z])([A-Z])/g, "$1 $2")).toLowerCase(), 5)
    }

    fetch('/search-index.json').then(r => r.json()).then(index => {
        searchIndex.add(index)
        const searchPopup = document.createElement('search-popup');
        searchPopup.setAttribute('search', 'search')
        document.body.appendChild(searchPopup);
    });
</script>
</body>
</html>

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.processJsDocs = void 0;
/**
 * Extracts tags from JSDocs array
 *
 * @param docs - the JSDoc array
 * @returns the doc tags and description
 * @example
 * ```ts
 * processJsDocs(node.getJsDocs())
 * ```
 */
function processJsDocs(docs) {
    return docs.map(d => {
        const lines = d.getInnerText().split('\n');
        let inCode = false;
        const tags = [];
        let currentTag = undefined;
        for (let line of lines) {
            if (!inCode && line.startsWith('@')) {
                tags.push(currentTag);
                currentTag = {
                    text: '',
                    tagName: line.split(' ')[0]
                };
                line = line.split(' ').slice(1, line.split(' ').length).join(' ');
            }
            if (line.startsWith('```')) {
                inCode = !inCode;
            }
            if (currentTag)
                currentTag.text += line + '\n';
        }
        tags.push(currentTag);
        return {
            description: d.getDescription(),
            tags: tags.filter(t => t)
        };
    });
}
exports.processJsDocs = processJsDocs;
//# sourceMappingURL=processJsDocs.js.map
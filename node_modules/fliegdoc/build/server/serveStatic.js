"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.serveStatic = void 0;
const express_1 = __importDefault(require("express"));
const config_1 = require("../model/config");
/**
 * Starts an HTTP server on `port` and statically serves the documentation in the config's `outDir`.
 *
 * @param port - the port on which the documentation gets served
 *
 * @throws Error - if the theme isn't browser-viewable, i.e., if {@link Theme.isBrowserViewable} is `false`
 *
 * @example
 * ```ts
 * import { buildTreeForConfig, serveDynamic, buildStatic } from 'fliegdoc';
 *
 * const tree = buildTreeForConfig();
 * await buildStatic(tree);
 * serveStatic(port);
 * ```
 */
function serveStatic(port = 3000) {
    if (!config_1.getConfig().theme.isBrowserViewable)
        throw new Error('The selected theme is not browser-viewable.');
    const app = express_1.default();
    app.use(config_1.getConfig().baseUrl, express_1.default.static(config_1.getConfig().outDir));
    app.listen(port, () => {
        console.log(`Listening on http://localhost:${port}${config_1.getConfig().baseUrl}`);
    });
}
exports.serveStatic = serveStatic;
//# sourceMappingURL=serveStatic.js.map
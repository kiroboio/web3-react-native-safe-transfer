"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getStaticFileHandler = void 0;
const handleLocalImageLink_1 = require("./handleLocalImageLink");
/**
 * Gets a static file record as well as a utility function for replacing images, i.e., static files
 *
 * @param config - the config
 * @returns a record of the static files as well as a replacer function for images in the README
 *
 * @see {@link writeStaticFiles}
 *
 * @example
 * ```ts
 * const {staticFiles, readmeImageReplacer} = getStaticFileHandler(config);
 *
 * write('readme', readmeContent.replace(/!\[(.*?)]\((.*?)\)/g, readmeImageReplacer));
 *
 * writeStaticFiles(staticFiles);
 * ```
 */
function getStaticFileHandler(config) {
    /**
     * Static files that need to get copied to the `outDir`, e.g., for local images
     */
    const staticFiles = {};
    const readmeImageReplacer = (orig, altText, link) => {
        // handle images
        if (link.startsWith('http://') || link.startsWith('https://')) {
            // global link => can stay as it is
            return orig;
        }
        else {
            // image exists and should get copied to the output
            return handleLocalImageLink_1.handleLocalImageLink(altText, link, staticFiles, config);
        }
    };
    return { staticFiles, readmeImageReplacer };
}
exports.getStaticFileHandler = getStaticFileHandler;
//# sourceMappingURL=getStaticFileHandler.js.map